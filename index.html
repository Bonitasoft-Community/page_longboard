<!doctype html>
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->


<head>
    <meta charset="utf-8">
    <title>Longboard Monitor</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="pageResource?page=custompage_longboard&location=style/animate.css" />
    <link rel="stylesheet" href="pageResource?page=custompage_longboard&location=style/bootstrap.min.css">
	<link rel="stylesheet" href="pageResource?page=custompage_longboard&location=style/main.css">
	<link rel="stylesheet" href="pageResource?page=custompage_longboard&location=style/style.css">
	<link rel="stylesheet" href="pageResource?page=custompage_longboard&location=style/toggle.css">
 
	<script type="text/javascript" src="https://www.google.com/jsapi"></script>
	<script type="text/javascript" src="https://www.google.com/uds/?file=visualization&amp;v=1&amp;hl=fr&amp;packages=corechart&amp;async=2"></script>
	<link type="text/css" href="https://www.google.com/uds/api/visualization/1.0/ff67c3772da186a412ae3231c32409e9/ui+fr.css" rel="stylesheet">
	<script type="text/javascript" src="https://www.google.com/uds/api/visualization/1.0/ff67c3772da186a412ae3231c32409e9/format+fr,default+fr,ui+fr,corechart+fr.I.js"></script>
	<link href="https://ajax.googleapis.com/ajax/static/modules/gviz/1.0/core/tooltip.css" rel="stylesheet" type="text/css">
		
			
<style>
.Loading {
    display: inline-block;
    vertical-align: middle;
    background-position: center;
    background:no-repeat;
    background-image: url('data:image/gif;base64,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');
    width:20px;
    height:20px;
    margin-top:6px;
    margin-right:7px;
}
.AutocompleteDropDown {
	background-color: #fcf8e3;
	}

.error-log {	
    width: 100%;
    height: 500px;
    overflow: scroll;
    overflow-x: hidden;
    background: #eae4e4;
    resize: none;
    margin: 15px 0;
    }	
</style>
</head>
<body ng-app="longboardmonitor">


<!--  Page Directory: @_PAGEDIRECTORY_@ -->

<div class="bs-component"  ng-controller="MainController as mainctrl">

	<center>
	<table><tr><td><h1>Long board</h1></td><td rowspan="2"><img src="pageResource?page=custompage_longboard&location=img/longboard.jpg" width="150" heigth="150" /></td></tr>
		<tr><td style="font-size:0.8em">V4.7.0</td></tr>
	</table>
	</center>
</div>


<div class="col-lg-12">

	<div class="bs-component" ng-mouseenter="hover('apps')" ng-mouseleave="hover('apps')"  ng-controller="ShowHistoryController as histctrl">
		<legend class="text-primary"><span class="glyphicon glyphicon-th"></span>Case history</legend>
		<div class="panel panel-primary">
			<div class="panel-body">
			
				<div class="explanation">
				Give a CaseId, and then all it's history is displayed.
				</div>
					
							
				<div class="row">
						<div class="col-lg-3">
						<!--  search info -->
						<table>
							<tr><td>Case Id</td><td> <input type="number" ng-model="histctrl.param.caseId"  /></td></tr>
							<tr><td>Show sub process tasks</td>	<td> <input  type="checkbox" ng-model="histctrl.param.showSubProcess"  /></td></tr>		
							<tr><td>Load BDM Variable</td>	<td> <input  type="checkbox" ng-model="histctrl.param.loadBdmVariable"  /></td></tr>
							<tr><td colspan="2">
								<table>
									<tr><td>  <div ng-show="histctrl.historyinprogress"><span class="Loading">.</span></div>
									</td><td> <button ng-click="histctrl.showcasehistory()" ng-disabled="histctrl.historyinprogress" class="btn btn-info btn-xl" title="Show the history of a case" value="Show history">Show</button><p>
									</td></tr>
								</table>						
							</td></tr>
						</table>
					</div>
				
								
					<div class="col-lg-8">
						<!--  search index -->
						<div class="panel panel-info">
							<div class="panel-heading">Search Index</div>
							<div>
								<table class="table table-striped table-hover table-condensed">
									<tr><td>index 1:</td><td><input type="text" ng-model="histctrl.param.search1"></td></tr>
									<tr><td>index 2:</td><td><input type="text" ng-model="histctrl.param.search2"></td></tr>
									<tr><td>index 3:</td><td><input type="text" ng-model="histctrl.param.search3"></td></tr>
									<tr><td>index 4:</td><td><input type="text" ng-model="histctrl.param.search4"></td></tr>
									<tr><td>index 5:</td><td><input type="text" ng-model="histctrl.param.search5"></td></tr>
									<tr><td colspan="2">
										<button ng-click="histctrl.searchByIndex()" ng-disabled="histctrl.historyinprogress" class="btn btn-info btn-xl" title="Search cases by index" >Search</button>
										</td>
									</tr>
									<tr><td colspan="2">
										<table class="table table-striped table-hover table-condensed" style="background-color:#dff0d8">
											<tr>
												<th>CaseID</th>
												<th>Start date</th>
												<th>Process Information</th>
												<th>Index 1</th>
												<th>Index 2</th>
												<th>Index 3</th>
												<th>Index 4</th>
												<th>Index 5</th>
												<th></th>
											</tr>											
											<tr ng-repeat="casesearch in histctrl.searchindexresult track by $index">
												<td>{{casesearch.caseId}}</td>
												<td>{{casesearch.startDateSt}}</td>													
												<td>{{casesearch.processInfo}}</td>	
												<td>{{casesearch.index1}}</td>	
												<td>{{casesearch.index2}}</td>	
												<td>{{casesearch.index3}}</td>	
												<td>{{casesearch.index4}}</td>	
												<td>{{casesearch.index5}}</td>	
												<td>
													<button ng-click="histctrl.param.caseId= casesearch.realCaseId;histctrl.showcasehistory()" 
														ng-disabled="histctrl.historyinprogress" class="btn btn-info btn-xs" title="Show history" >Show {{casesearch.rootCaseId}}</button>
												</td>
											</tr>
										</table>
									</td>
									</tr>
								</table>	
							</div>
						</div>	
					</div> <!--  end col-lg-4 -->
				</div> <!--  end class=row -->
				<p>
				<div class="alert alert-danger" role="alert" ng-show="histctrl.casehistory.errormessage.length > 0">{{histctrl.casehistory.errormessage}}</div>

					<h2><button ng-click="histctrl.showcasehistory()" ng-disabled="histctrl.historyinprogress" class="btn btn-info btn-xs"><span class="glyphicon glyphicon-refresh"></span></button>Overview </h2>
					<table class="table table-striped table-hover table-condensed">
						<tr><td class="tabletitle" style="background-color:#fcf8e3" >Case Id</td>
							<td >{{histctrl.casehistory.caseId}} &nbsp;&nbsp;
								<span ng-show="histctrl.casehistory.archiveCaseId">(Archived Case Id : {{histctrl.casehistory.archiveCaseId}}</span>
							</td>
						<tr><td class="tabletitle" style="background-color:#fcf8e3" >Case State</td><td>{{histctrl.casehistory.caseState}} &nbsp;&nbsp;
							<button ng-click="histctrl.cancelCase()" ng-show="histctrl.casehistory.caseState == 'ACTIF'"  ng-disabled="histctrl.historyinprogress" title="Cancel a case will archive it immediately. All actives activities will be aborted" class="btn btn-danger btn-xs" >Cancel</button>	
						</td></tr>
						<tr><td class="tabletitle" style="background-color:#fcf8e3" >Start date</td><td>{{histctrl.casehistory.startDateSt}}</td></tr>
						<tr><td class="tabletitle" style="background-color:#fcf8e3" >End date</td><td>{{histctrl.casehistory.endDateSt}}</td></tr>
						<tr><td class="tabletitle" style="background-color:#fcf8e3" >Archive date</td><td>{{histctrl.casehistory.archivedDateSt}}</td></tr>
						<tr><td class="tabletitle" style="background-color:#fcf8e3" >String index</td><td>{{histctrl.casehistory.stringIndex}}</td></tr>
						<tr><td class="tabletitle" style="background-color:#fcf8e3" >Process Definition</td><td>{{histctrl.casehistory.processInfo}}</td></tr>
					</table>
					<h2><button ng-click="histctrl.showcasehistory()" ng-disabled="histctrl.historyinprogress" class="btn btn-info btn-xs"><span class="glyphicon glyphicon-refresh"></span></button>Synthesis</h2>
						<table class="table table-striped table-hover table-condensed" >
						<tr>
							<th class="tabletitle" style="background-color:#fcf8e3" >Begin</th>
							<th class="tabletitle" style="background-color:#fcf8e3" >End</th>
							<th class="tabletitle" style="background-color:#fcf8e3" >Name</th>
							<th class="tabletitle" style="background-color:#fcf8e3" >Type</th>
							<th class="tabletitle" style="background-color:#fcf8e3" >State</th>
							<th class="tabletitle" style="background-color:#fcf8e3" >BeginConnector (ms)</th>
							<th class="tabletitle" style="background-color:#fcf8e3" >User (ms)</th>							
							<th class="tabletitle" style="background-color:#fcf8e3">FinishConnector (ms)</th>
							
						</tr>
						<tr ng-repeat="activitysynthesis in histctrl.casehistory.synthesis track by $index">
							<td>{{activitysynthesis.dateBeginSt}}</td>	
							<td>{{activitysynthesis.dateEndST}}</td>	
							<td>{{activitysynthesis.activityName}}</td>
							<td>{{activitysynthesis.type}}</td>
							<td>{{activitysynthesis.state}}</td>
							<td style="text-align: right">{{activitysynthesis.enterconnector}}</td>
							<td style="text-align: right">{{activitysynthesis.user}}</td>	
							<td style="text-align: right">{{activitysynthesis.finishconnector}}</td>	
							
							<!-- <td>{{activity.expl}}</td>		 -->						
						</tr>
					</table>

					<h2><button ng-click="histctrl.showcasehistory()" ng-disabled="histctrl.historyinprogress" class="btn btn-info btn-xs"><span class="glyphicon glyphicon-refresh"></span></button>Actives</h2>
						<table class="table table-striped table-hover table-condensed"> <!--   style="background-color:#dff0d8"> -->
						<tr>
							<th class="tabletitle" style="background-color:#fcf8e3">Date</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Name</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Activity Id</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Actor name</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Nb candidates</th>							
							<th class="tabletitle" style="background-color:#fcf8e3">Assignee</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Due Date</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Timer ?</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Activity Is Terminal</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Activity Type</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Activity State</th>
							<th class="tabletitle" style="background-color:#fcf8e3"></th>	
						</tr>
						<tbody ng-repeat="activity in histctrl.casehistory.actives track by $index">
						<tr>
							<td>{{activity.humanActivityDateSt}}</td>	
							<td>{{activity.activityName}}</td>
							<td>{{activity.activityIdDesc}}</td>
							<td>{{activity.actorname}}</td>
							<td>{{activity.nbcandidates}}</td>
							<td><div ng-if="activity.assigneeid > 0" title="{{activity.assigneeuser}}"><span class="glyphicon glyphicon-user"> </span> {{activity.assigneeusername}}</div></td>
							<td>{{activity.expectedenddate}}</td>
							<td>{{activity.jobIsStillSchedule}}</td>
							<td>{{activity.isTerminal}}</td>
							<td>{{activity.type}}</td>
							<td>{{activity.state}}</td>
							<td>
								<table><tr>								
									<td ng-if="activity.type == 'USER_TASK' && activity.assigneeid > 0"  style="padding:5px 5px">
										<div ng-show="histctrl.historyinprogress"><span class="Loading">.</span></div>
										<button ng-click="histctrl.releaseUserTask(activity)" ng-disabled="histctrl.historyinprogress" class="btn btn-info btn-xs" >Unassign</button>

									</td><td ng-if="activity.type == 'USER_TASK'"  style="padding:5px 5px">
										<div ng-show="histctrl.historyinprogress"><span class="Loading">.</span></div>
										<button ng-click="histctrl.replayActorFilter(activity)" ng-disabled="histctrl.historyinprogress" class="btn btn-info btn-xs" >Replay actor filter</button>
										
									</td><td ng-if="activity.type == 'USER_TASK' && activity.ACTIONEXECUTE === true" style="padding:5px 5px">
										<span title="Apply a delay. May be negative, then the due date will be closer. Example, give -60 to have a due date one hour before the current value">Delay The Due date (in minutes):</span><input ng-model="activity.updateduedate" type="number"/>
										<div ng-show="histctrl.historyinprogress"><span class="Loading">.</span></div>
										<button ng-click="histctrl.updateDueDate(activity)" ng-disabled="histctrl.historyinprogress" class="btn btn-info btn-xs" >Update Due Date</button>
										
									</td><td ng-if="activity.ACTIONEXECUTE === true" style="padding:5px 5px">
										<button ng-click="histctrl.executeActivity(activity)" ng-disabled="histctrl.historyinprogress" class="btn btn-warning btn-xs" >Execute</button>
									</td>
								</tr></table>
								
								<div ng-bind-html="histctrl.getListEvents(activity.listevents )"></div>

								<div class="label label-info">{{activity.statusexecution}}</div>
								
							</td>
						</tr>
						
						<tr ng-if="activity.state == 'failed'">
							<td></td>
							<td colspan="11">
								<table class="table table-condensed table-bordered">
									<tr><th>Name</th><th>State</th><th>Error message</tr>
									<tbody ng-repeat="connector in activity.listconnectors">
									<tr>
										<td>{{connector.connectorname}}</td><td>{{connector.connectorstate}}</td>
										<td>{{connector.connectormessage}}
											<div ng-if="connector.connectormessage.length> 0">
												<input type="checkbox"  ng-model="connector.showstacktrace">Show Stack Trace
											</div>
										</td>
									</tr>
									<tr ng-if="connector.showstacktrace"> <td colspan="3"><textarea class="error-log">{{connector.connectorstacktrace}}</textarea></td></tr>
									</tbody>
								</table>
								<div ng-show="histctrl.historyinprogress"><span class="Loading">.</span></div>
								<button ng-click="histctrl.replayFailedTask(activity)" ng-disabled="histctrl.historyinprogress" class="btn btn-info btn-xs" >Replay Failed Task</button>
								&nbsp;
								<button ng-click="histctrl.skipFailedTask(activity)" ng-disabled="histctrl.historyinprogress" class="btn btn-danger btn-xs" >Skip Failed Task</button>
							</td>
						</tr>
						<!-- <tr><td colspan="12">{{activity}}</td></tr>  -->
						</tbody>
					</table>

					<!-- ************************************************************ -->
					<!--                           ACTIVITIES                         -->
					<!-- ************************************************************ -->
					<h2><button ng-click="histctrl.showcasehistory()" ng-disabled="histctrl.historyinprogress" class="btn btn-info btn-xs"><span class="glyphicon glyphicon-refresh"></span></button>Activities</h2>
					See <a href="http://documentation.bonitasoft.com/execution-sequence-states-and-transactions">Documentation</a> for more information on states
					<input type="checkbox" ng-model="histctrl.showFlowdefnodeid">Show FlowNodeDefid
					<input type="checkbox" ng-model="histctrl.showParentContainer">Show Parent Container
					<input type="checkbox" ng-model="histctrl.showParentactivityid">Show Parent Activity
					<input type="checkbox" ng-model="histctrl.showContractValues">Show All Contract Values (human task)
					<table class="table table-striped table-hover table-condensed">
						<tr>
							<th class="tabletitle" style="background-color:#fcf8e3">Date</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Name</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Activity Id</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Perimeter</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Timer ?</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Terminal ?</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Type</th>
							<th class="tabletitle" style="background-color:#fcf8e3">State</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Executed By</th>	
							<th class="tabletitle" style="background-color:#fcf8e3" ng-show="histctrl.showFlowdefnodeid" >FlownodeDefId</th>	
							<th class="tabletitle" style="background-color:#fcf8e3" ng-show="histctrl.showParentContainer" >ParentContainer</th>
							<th class="tabletitle" style="background-color:#fcf8e3" ng-show="histctrl.showParentactivityid">parentactivityid</th>							
						</tr>
						<tbody ng-repeat="activity in histctrl.casehistory.activities track by $index">
							<tr>
								<td style="{{histctrl.getStyleActivity(activity)}}">{{activity.humanActivityDateSt}}</td>
								<td style="{{histctrl.getStyleActivity(activity)}}">{{activity.activityName}}</td>
								<td style="{{histctrl.getStyleActivity(activity)}}">{{activity.activityIdDesc}}</td>
								<td style="{{histctrl.getStyleActivity(activity)}}">{{activity.perimeter}}</td>
								<td style="{{histctrl.getStyleActivity(activity)}}">{{activity.jobIsStillSchedule}} {{activity.jobScheduleDate}}</td>
								<td style="{{histctrl.getStyleActivity(activity)}}">{{activity.isTerminal}}</td>
								<td style="{{histctrl.getStyleActivity(activity)}}">{{activity.type}}
									<div ng-if="activity.contract">
										<input type="checkbox" ng-model="activity.showContract">Contract
									</div>
								</td>
								<td style="{{histctrl.getStyleActivity(activity)}}">{{activity.state}}</td>
								<td style="{{histctrl.getStyleActivity(activity)}}">{{activity.executedby}}</td>
								<td style="{{histctrl.getStyleActivity(activity)}}" ng-show="histctrl.showFlowdefnodeid"   >{{activity.FlownodeDefId}}</td>
								<td style="{{histctrl.getStyleActivity(activity)}}" ng-show="histctrl.showParentContainer" >{{activity.parentcontainer}}</td>
								<td style="{{histctrl.getStyleActivity(activity)}}"  ng-show="histctrl.showParentactivityid">{{activity.parentactivityid}}</td>
								<!-- <td>{{activity.expl}}</td> -->
							</tr>
							<tr ng-if="histctrl.showContractValues || activity.showContract">
								<td></td>
								<td></td>
								<td colspan="7">
									<table style="border:1px">
									<tr ng-repeat ="contract in activity.contract" >
										<td style="border: 1px solid black;vertical-align: top">{{contract.name}}</td>
										<td style="border: 1px solid black;vertical-align: top">{{contract.type}}</td>
										<td style="border: 1px solid black;vertical-align: top">{{contract.value}}</td>
									</tr>
									</table>
								</td>
							</tr> 
						</tbody>
					</table>
					
					<!-- ************************************************************ -->
					<!--                           TIMERS                             -->
					<!-- ************************************************************ -->
					
					<h2><button ng-click="histctrl.showcasehistory()" ng-disabled="histctrl.historyinprogress" class="btn btn-info btn-xs"><span class="glyphicon glyphicon-refresh"></span></button>Timers</h2>
					<table class="table table-striped table-hover table-condensed">
						<tr>
							<!-- <th>JobName</th> -->
							<th class="tabletitle" style="background-color:#fcf8e3">Activity Name</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Activity Id</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Schedule</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Date</th>						
							<th class="tabletitle" style="background-color:#fcf8e3"></th>
						
						</tr>
						<tr ng-repeat="scheduletimer in histctrl.casehistory.timers track by $index">
							<!--  <td>{{scheduletimer.jobName}}</td> -->
							<td>{{scheduletimer.activityName}}</td>
							<td>{{scheduletimer.activityIdDesc}}</td>
							<td>{{scheduletimer.jobIsStillSchedule}}</td>
							<td>{{scheduletimer.timerDate}}</td>
							<td> 
								<table  >
									<tr><td>
										<button ng-click="scheduletimer.updatetype='DELAY'; scheduletimer.updatevalue='0';histctrl.updateTimer( scheduletimer )" class="btn btn-warning btn-xs" >Immediat</button>	
										<select ng-model="scheduletimer.updatetype">
												<option value="DELAY" selected>Delay</option>
												<option value="DATE">Date</option>									
											</select>
										</td><td>
											<div ng-show="scheduletimer.updatetype == 'DELAY'">Delay (in secondes)</div>
											<div ng-show="scheduletimer.updatetype == 'DATE'">Date (format yyyy-mm-dd HH24:MM:ss)</div>
										</td><td>
											<input ng-model="scheduletimer.updatevalue" />
										</td><td>
											<button ng-click="histctrl.updateTimer( scheduletimer )" class="btn btn-warning btn-xs" >Update</button>	
										</td>
									</tr>
									<tr><td colspan="4">
										<div ng-bind-html="histctrl.getListEvents(scheduletimer.listevents )"></div>
										<div class="label label-info">{{scheduletimer.statusexecution}}</div>
									</td></tr>
								</table>
							</td>
								
						</tr>
					</table>
					
					<!-- ************************************************************ -->
					<!--                           SIGNAL                             -->
					<!-- ************************************************************ -->
					
					<h2><button ng-click="histctrl.showcasehistory()" ng-disabled="histctrl.historyinprogress" class="btn btn-info btn-xs"><span class="glyphicon glyphicon-refresh"></span></button>Signals</h2>
					<table class="table table-striped table-hover table-condensed">
						<tr>
							<!-- <th>JobName</th> -->
							<th class="tabletitle" style="background-color:#fcf8e3">Activity Name</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Signal</th>
							<th class="tabletitle" style="background-color:#fcf8e3"></th>
						
						</tr>
						<tr ng-repeat="signal in histctrl.casehistory.signals track by $index">
							<td>{{signal.activityName}}</td>
							<td>{{signal.signalName}}</td>
							<td> <div ng-show="histctrl.historyinprogress"><span class="Loading">.</span></div> <button ng-click="histctrl.sendSignal( signal )" class="btn btn-warning btn-xs" ng-disabled="histctrl.historyinprogress">Send signal</button><p>
							<div ng-bind-html="histctrl.getListEvents(signal.listevents )"></div>
							
							<span class="explanation">Attention, a signal will unlock all tasks waiting on this signal</span>  
							</td>
						</tr>	
					</table>
					
					
					<!-- ************************************************************ -->
					<!--                           MESSAGE                            -->
					<!-- ************************************************************ -->
					
					<h2><button ng-click="histctrl.showcasehistory()" ng-disabled="histctrl.historyinprogress" class="btn btn-info btn-xs"><span class="glyphicon glyphicon-refresh"></span></button>Messages</h2>
					<table class="table table-striped table-hover table-condensed">
						<tr>
							<th class="tabletitle" style="background-color:#fcf8e3">Activity Name</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Message name</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Correlation</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Content</th>
						
						</tr>
						<tbody ng-repeat="message in histctrl.casehistory.messages track by $index">
						<tr>
							<td>{{message.activityName}}</td>
							<td>{{message.messageName}}</td>
							<td>
								<table  class="table table-bordered" >
								<tr  ng-repeat="corr in message.correlations track by $index">
										<td style="border: 1px solid black;">{{corr.msgVarName}}</td>
										<td style="border: 1px solid black;"><span title="{{corr.corrDefinition}}">{{corr.msgVarValue}}</span></td>									
									</tr>
								</table>
							</td>
							<td>
								<table  class="table table-bordered" >
									<tr  ng-repeat="content in message.contents track by $index">
										<td style="border: 1px solid black">{{content.msgVarName}}</td>
										<td style="border: 1px solid black"><input type="text" ng-model="content.msgVarValue"></td>
									</tr>
								</table>
							</td>
						</tr>
						<tr>
							<td colspan="2">
							</td>
							<td colspan="2">
							<div ng-show="histctrl.historyinprogress"><span class="Loading">.</span></div>
							<button ng-click="histctrl.sendMessage( histctrl.casehistory, message )" class="btn btn-warning btn-xs" ng-disabled="histctrl.historyinprogress">Send message</button>
							<div ng-bind-html="histctrl.getListEvents(message.listevents )"></div>
							</td>
						</tr>
						</tbody>
					</table>
					
					
					<!-- ************************************************************ -->
					<!--                           VARIABLES                          -->
					<!-- ************************************************************ -->
					
					<h2><button ng-click="histctrl.showcasehistory()" ng-disabled="histctrl.historyinprogress" class="btn btn-info btn-xs"><span class="glyphicon glyphicon-refresh"></span></button>Time Line</h2>
					<!-- style="{{performancemesureCssStyle}}" -->
					<div google-chart chart="chartTimeline" id="chartTimeline" style="height: 400px; width: 100%; position: relative; "></div>
			
					<h2><button ng-click="histctrl.showcasehistory()" ng-disabled="histctrl.historyinprogress" class="btn btn-info btn-xs"><span class="glyphicon glyphicon-refresh"></span></button>Variables</h2>
					<input  type="checkbox" ng-model="histctrl.param.showArchivedData"  />Show Archived data &nbsp;&nbsp;&nbsp;
					<input  type="checkbox" ng-model="histctrl.param.showProcessData"  />Show Process data &nbsp;&nbsp;&nbsp;
					<input  type="checkbox" ng-model="histctrl.param.showLocalData"  />Show Local data &nbsp;&nbsp;&nbsp;
					<input  type="checkbox" ng-model="histctrl.param.showBdmData"  />Show BDM data &nbsp;&nbsp;&nbsp;
					<table class="table table-striped table-hover table-condensed">
						<tr>
							<th class="tabletitle" style="background-color:#fcf8e3" ng-show="histctrl.param.showSubProcess">Process</th>
							<th class="tabletitle" style="background-color:#fcf8e3" ng-show="histctrl.param.showSubProcess">Version</th>
							<th class="tabletitle" style="background-color:#fcf8e3" ng-show="histctrl.param.showSubProcess">Process id</th>	
							<th class="tabletitle" style="background-color:#fcf8e3">Context</th>	
							<th class="tabletitle" style="background-color:#fcf8e3">Scope</th>						
							<th class="tabletitle" style="background-color:#fcf8e3">Name</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Description</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Value</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Type</th>	
							<th class="tabletitle" style="background-color:#fcf8e3">Archived</th>	
							<th class="tabletitle" style="background-color:#fcf8e3">Date</th>	
						</tr>
						<tbody ng-repeat="variable in histctrl.casehistory.variables track by $index">
						<tr ng-show="histctrl.isShowVariable(variable)">
							<td ng-show="histctrl.param.showSubProcess" style="{{histctrl.getStyleActif(variable)}}">{{variable.processname}}</td>
							<td ng-show="histctrl.param.showSubProcess" style="{{histctrl.getStyleActif(variable)}}">{{variable.processversion}}</td>
							<td ng-show="histctrl.param.showSubProcess" style="{{histctrl.getStyleActif(variable)}}">{{variable.processinstance}}</td>
							<td style="{{histctrl.getStyleActif(variable)}}">{{variable.contextinfo}}</td>
							<td style="{{histctrl.getStyleActif(variable)}}">{{variable.scope}}</td>
							<td style="{{histctrl.getStyleActif(variable)}}">{{variable.name}}</td>
							<td style="{{histctrl.getStyleActif(variable)}}">{{variable.description}}</td>							
							<td style="{{histctrl.getStyleActif(variable)}}">
								<div ng-if="variable.scope == 'BDM'">pid={{variable.persistenceid}}<br></div>{{variable.value}}
							</td>
							<td style="{{histctrl.getStyleActif(variable)}}">{{variable.type}}</td>
							<td style="{{histctrl.getStyleActif(variable)}}">{{variable.status}}</td>
							<td style="{{histctrl.getStyleActif(variable)}}">{{variable.datearchived | date:'medium' }}</td>
						</tr>
						</tbody>
					</table>
					
					<!-- ************************************************************ -->
					<!--                           PROCESSINSTANCE                         -->
					<!-- ************************************************************ -->
					
					<h2><button ng-click="histctrl.showcasehistory()" ng-disabled="histctrl.historyinprogress" class="btn btn-info btn-xs"><span class="glyphicon glyphicon-refresh"></span></button>Process Instances</h2>
					
					<input type="checkbox" ng-model="histctrl.showProcessContractValues">Show All Contract Instantiation Values
					
					<table class="table table-striped table-hover table-condensed">
						<tr>
							<th class="tabletitle" style="background-color:#fcf8e3">Process Instance</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Process Name</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Process Version</th>
							
							<th class="tabletitle" style="background-color:#fcf8e3">Parent Activity</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Parent processInstance</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Parent process name</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Parent process version</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Status</th>
						</tr>
							
						<tbody ng-repeat="processintance in histctrl.casehistory.processintances track by $index">
						<tr>
							<td style="{{histctrl.getStyleActif(processintance)}}">{{processintance.id}}
								<div ng-if="processintance.contract">
										<input type="checkbox" ng-model="processintance.showContract">Contract
									</div>							
							</td>
							<td style="{{histctrl.getStyleActif(processintance)}}">{{processintance.processname}}</td>
							<td style="{{histctrl.getStyleActif(processintance)}}">{{processintance.processversion}}</td>
							<td style="{{histctrl.getStyleActif(processintance)}}">{{processintance.parentact}}</td>
							<td style="{{histctrl.getStyleActif(processintance)}}">{{processintance.parentid}}</td>
							<td style="{{histctrl.getStyleActif(processintance)}}">{{processintance.parentprocessname}}</td>
							<td style="{{histctrl.getStyleActif(processintance)}}">{{processintance.parentprocessversion}}</td>
							<td style="{{histctrl.getStyleActif(processintance)}}">{{processintance.status}}</td>
						</tr>
						<tr ng-if="histctrl.showProcessContractValues || processintance.showContract">
								<td></td>
								<td></td>
								<td colspan="7">
									<table>
									<tr ng-repeat ="contract in processintance.contract" >
										<td style="border: 1px solid black;vertical-align: top">{{contract.name}}</td>
										<td style="border: 1px solid black;vertical-align: top">{{contract.type}}</td>
										<td style="border: 1px solid black;vertical-align: top">{{contract.value}}</td>
									</tr>
									</table>
								</td>
							</tr> 
						</tbody>
					</table>
							
					<!-- ************************************************************ -->
					<!--                           DOCUMENTS                          -->
					<!-- ************************************************************ -->
												
					<h2><button ng-click="histctrl.showcasehistory()" ng-disabled="histctrl.historyinprogress" class="btn btn-info btn-xs"><span class="glyphicon glyphicon-refresh"></span></button>Documents</h2>
					<table class="table table-striped table-hover table-condensed">
						<tr>
							<th class="tabletitle" style="background-color:#fcf8e3">Document Name</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Id</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Content ?</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Index</th>	
							<th class="tabletitle" style="background-color:#fcf8e3">StorageId</th>													
							<th class="tabletitle" style="background-color:#fcf8e3">Url</th>						
							<th class="tabletitle" style="background-color:#fcf8e3">Creation date</th>
							<th class="tabletitle" style="background-color:#fcf8e3">File Name</th>
							<th class="tabletitle" style="background-color:#fcf8e3">Mime type</th>						
						</tr>
						<tr ng-repeat="document in histctrl.casehistory.documents track by $index">
							<td>{{document.name}}</td>
							<td>{{document.id}}</td>
							<td>{{document.hascontent}}</td>
							<td>{{document.docindex}}</td>
							<td>{{document.contentstorageid}}</td>
							<td><a href="/bonita/portal/{{document.url}}" target="blanck">{{document.url}}</a></td>
							<td>{{document.creationdate}}</td>
							<td>{{document.contentfilename}}</td>
							<td>{{document.contentmimetype}}</td>
						</tr>
					</table>
					
					<!-- ************************************************************ -->
					<!--                           Case Visu                          -->
					<!-- ************************************************************ -->
					<h2><button ng-click="histctrl.showcasehistory()" ng-disabled="histctrl.historyinprogress" class="btn btn-info btn-xs"><span class="glyphicon glyphicon-refresh"></span></button>Case Design</h2>
						Note: this is a Entreprise only feature.
						<div ng-repeat="processinstance in histctrl.casehistory.processintances track by $index">
							<h3>Process Instance: {{processinstance.id}} Process: {{processinstance.processname}} ( {{processinstance.processversion}})</h3>
							
							<iframe ng-src="{{histctrl.getUrlCaseVisu( processinstance)}}" style="width:100%; height:600px">
							</iframe>
						</div>
				
					
				</div>
			</div>
		</div>
</div> <!--  end caseHistory -->

	



<!-- Third party dependencies -->

<script src="pageResource?page=custompage_longboard&location=3rd-party/jquery.min.js"></script>

<script src="pageResource?page=custompage_longboard&location=3rd-party/angular.min.js"></script>

<script src="pageResource?page=custompage_longboard&location=3rd-party/angular-resource.min.js"></script>
<script src="pageResource?page=custompage_longboard&location=3rd-party/angular-cookies.min.js"></script>

<script src="pageResource?page=custompage_longboard&location=3rd-party/bootstrap/js/bootstrap.min.js"></script>
<script src="pageResource?page=custompage_longboard&location=3rd-party/angular-bootstrap-tpls.min.js"></script>
<script src="pageResource?page=custompage_longboard&location=3rd-party/angular-file-upload.js"></script> 
<script src="pageResource?page=custompage_longboard&location=3rd-party/ng-google-chart.js"></script> 
<script src="pageResource?page=custompage_longboard&location=3rd-party/angular-sanitize.min.js"></script> 


<!-- Application dependencies -->
<script src="pageResource?page=custompage_longboard&location=longboardmonitor.js&v=@_CURRENTTIMEMILIS_@"></script>

</body>
</html>		